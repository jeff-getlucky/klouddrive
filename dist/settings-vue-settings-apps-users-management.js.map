{"version":3,"file":"settings-vue-settings-apps-users-management.js?v=3a1514b1e0af5ddb1957","mappings":";;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC5HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AC/XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC94BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAkBA;AACA;;;;;;;;;;;;;;;ACtCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACRA;AACA;AACA;AACA;AACA;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACNA;AACA;AACA;AACA;AACA;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACvFA;;;;;AEAA;AACA;AACA;AACA;AACA","sources":["webpack:///nextcloud/apps/settings/src/constants/AppsConstants.js","webpack:///nextcloud/apps/settings/src/logger.js","webpack:///nextcloud/apps/settings/src/main-apps-users-management.js","webpack:///nextcloud/apps/settings/src/router.js","webpack:///nextcloud/apps/settings/src/store/api.js","webpack:///nextcloud/apps/settings/src/store/apps.js","webpack:///nextcloud/apps/settings/src/store/index.js","webpack:///nextcloud/apps/settings/src/store/oc.js","webpack:///nextcloud/apps/settings/src/store/settings.js","webpack:///nextcloud/apps/settings/src/store/users.js","webpack:///nextcloud/core/src/OCP/accessibility.js","webpack:///nextcloud/apps/settings/src/App.vue?vue&type=script&lang=js&","webpack:///nextcloud/apps/settings/src/App.vue?vue&type=template&id=f468116e&","webpack:///nextcloud/apps/settings/src/App.vue","webpack://nextcloud/./apps/settings/src/App.vue?083f","webpack:///nextcloud/webpack/bootstrap","webpack:///nextcloud/webpack/runtime/chunk loaded","webpack:///nextcloud/webpack/runtime/compat get default export","webpack:///nextcloud/webpack/runtime/define property getters","webpack:///nextcloud/webpack/runtime/ensure chunk","webpack:///nextcloud/webpack/runtime/get javascript chunk filename","webpack:///nextcloud/webpack/runtime/global","webpack:///nextcloud/webpack/runtime/hasOwnProperty shorthand","webpack:///nextcloud/webpack/runtime/load script","webpack:///nextcloud/webpack/runtime/make namespace object","webpack:///nextcloud/webpack/runtime/node module decorator","webpack:///nextcloud/webpack/runtime/publicPath","webpack:///nextcloud/webpack/runtime/jsonp chunk loading","webpack:///nextcloud/webpack/runtime/nonce","webpack:///nextcloud/webpack/before-startup","webpack:///nextcloud/webpack/startup","webpack:///nextcloud/webpack/after-startup"],"sourcesContent":["/**\n * @copyright 2022, Julia Kirschenheuter <julia.kirschenheuter@nextcloud.com>\n *\n * @author Julia Kirschenheuter <julia.kirschenheuter@nextcloud.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { translate as t } from '@nextcloud/l10n';\n\n/** Enum of verification constants, according to Apps */\nexport const APPS_SECTION_ENUM = Object.freeze({\n  enabled: t('settings', 'Active apps'),\n  disabled: t('settings', 'Disabled apps'),\n  updates: t('settings', 'Updates'),\n  'app-bundles': t('settings', 'App bundles'),\n  featured: t('settings', 'Featured apps'),\n  supported: t('settings', 'Supported apps') // From subscription\n});","/**\n * @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author Roeland Jago Douma <roeland@famdouma.nl>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { getLoggerBuilder } from '@nextcloud/logger';\nexport default getLoggerBuilder().setApp('settings').detectUser().build();","/**\n * @copyright Copyright (c) 2018 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author rakekniven <mark.ziegler@rakekniven.de>\n * @author Roeland Jago Douma <roeland@famdouma.nl>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport Vue from 'vue';\nimport VTooltip from 'v-tooltip';\nimport { sync } from 'vuex-router-sync';\nimport App from './App.vue';\nimport router from './router.js';\nimport store from './store/index.js';\nVue.use(VTooltip, {\n  defaultHtml: false\n});\nsync(store, router);\n\n// CSP config for webpack dynamic chunk loading\n// eslint-disable-next-line camelcase\n__webpack_nonce__ = btoa(OC.requestToken);\n\n// bind to window\nVue.prototype.t = t;\nVue.prototype.n = n;\nVue.prototype.OC = OC;\nVue.prototype.OCA = OCA;\n// eslint-disable-next-line camelcase\nVue.prototype.oc_userconfig = oc_userconfig;\nconst app = new Vue({\n  router,\n  store,\n  render: h => h(App)\n}).$mount('#content');\nexport { app, router, store };","/**\n * @copyright Copyright (c) 2018 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author Julius Härtl <jus@bitgrid.net>\n * @author Roeland Jago Douma <roeland@famdouma.nl>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport Vue from 'vue';\nimport Router from 'vue-router';\nimport { generateUrl } from '@nextcloud/router';\nimport { APPS_SECTION_ENUM } from './constants/AppsConstants.js';\nimport store from './store/index.js';\nimport { setPageHeading } from '../../../core/src/OCP/accessibility.js';\n\n// Dynamic loading\nconst Users = () => import( /* webpackChunkName: 'settings-users' */'./views/Users.vue');\nconst Apps = () => import( /* webpackChunkName: 'settings-apps-view' */'./views/Apps.vue');\nVue.use(Router);\n\n/*\n * This is the list of routes where the vuejs app will\n * take over php to provide data\n * You need to forward the php routing (routes.php) to\n * the settings-vue template, where the vue-router will\n * ensure the proper route.\n * ⚠️ Routes needs to match the php routes.\n */\nconst baseTitle = document.title;\nconst router = new Router({\n  mode: 'history',\n  // if index.php is in the url AND we got this far, then it's working:\n  // let's keep using index.php in the url\n  base: generateUrl(''),\n  linkActiveClass: 'active',\n  routes: [{\n    path: '/:index(index.php/)?settings/users',\n    component: Users,\n    props: true,\n    name: 'users',\n    meta: {\n      title: () => {\n        return t('settings', 'Active users');\n      }\n    },\n    children: [{\n      path: ':selectedGroup',\n      name: 'group',\n      meta: {\n        title: to => {\n          if (to.params.selectedGroup === 'admin') {\n            return t('settings', 'Admins');\n          }\n          if (to.params.selectedGroup === 'disabled') {\n            return t('settings', 'Disabled users');\n          }\n          return decodeURIComponent(to.params.selectedGroup);\n        }\n      },\n      component: Users\n    }]\n  }, {\n    path: '/:index(index.php/)?settings/apps',\n    component: Apps,\n    props: true,\n    name: 'apps',\n    meta: {\n      title: () => {\n        return t('settings', 'Your apps');\n      }\n    },\n    children: [{\n      path: ':category',\n      name: 'apps-category',\n      meta: {\n        title: async to => {\n          if (to.name === 'apps') {\n            return t('settings', 'Your apps');\n          }\n          if (APPS_SECTION_ENUM[to.params.category]) {\n            return APPS_SECTION_ENUM[to.params.category];\n          }\n          await store.dispatch('getCategories');\n          const category = store.getters.getCategoryById(to.params.category);\n          if (category.displayName) {\n            return category.displayName;\n          }\n        }\n      },\n      component: Apps,\n      children: [{\n        path: ':id',\n        name: 'apps-details',\n        component: Apps\n      }]\n    }]\n  }]\n});\nrouter.afterEach(async to => {\n  var _to$meta$title, _to$meta;\n  const metaTitle = await ((_to$meta$title = (_to$meta = to.meta).title) === null || _to$meta$title === void 0 ? void 0 : _to$meta$title.call(_to$meta, to));\n  if (metaTitle) {\n    document.title = \"\".concat(metaTitle, \" - \").concat(baseTitle);\n    setPageHeading(metaTitle);\n  } else {\n    document.title = baseTitle;\n  }\n});\nexport default router;","/**\n * @copyright Copyright (c) 2018 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author Julius Härtl <jus@bitgrid.net>\n * @author Roeland Jago Douma <roeland@famdouma.nl>\n * @author Sujith Haridasan <sujith.h@gmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport axios from '@nextcloud/axios';\nimport { confirmPassword } from '@nextcloud/password-confirmation';\nimport '@nextcloud/password-confirmation/dist/style.css';\nconst sanitize = function (url) {\n  return url.replace(/\\/$/, ''); // Remove last url slash\n};\n\nexport default {\n  /**\n   * This Promise is used to chain a request that require an admin password confirmation\n   * Since chaining Promise have a very precise behavior concerning catch and then,\n   * you'll need to be careful when using it.\n   * e.g\n   * // store\n   * action(context) {\n   *   return api.requireAdmin().then((response) => {\n   *     return api.get('url')\n   *       .then((response) => {API success})\n   *       .catch((error) => {API failure});\n   *   }).catch((error) => {requireAdmin failure});\n   * }\n   * // vue\n   * this.$store.dispatch('action').then(() => {always executed})\n   *\n   * Since Promise.then().catch().then() will always execute the last then\n   * this.$store.dispatch('action').then will always be executed\n   *\n   * If you want requireAdmin failure to also catch the API request failure\n   * you will need to throw a new error in the api.get.catch()\n   *\n   * e.g\n   * api.requireAdmin().then((response) => {\n   *   api.get('url')\n   *     .then((response) => {API success})\n   *     .catch((error) => {throw error;});\n   * }).catch((error) => {requireAdmin OR API failure});\n   *\n   * @return {Promise}\n   */\n  requireAdmin() {\n    return confirmPassword();\n  },\n  get(url, options) {\n    return axios.get(sanitize(url), options);\n  },\n  post(url, data) {\n    return axios.post(sanitize(url), data);\n  },\n  patch(url, data) {\n    return axios.patch(sanitize(url), data);\n  },\n  put(url, data) {\n    return axios.put(sanitize(url), data);\n  },\n  delete(url, data) {\n    return axios.delete(sanitize(url), {\n      params: data\n    });\n  }\n};","/**\n * @copyright Copyright (c) 2018 Julius Härtl <jus@bitgrid.net>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author Julius Härtl <jus@bitgrid.net>\n * @author Roeland Jago Douma <roeland@famdouma.nl>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport api from './api.js';\nimport Vue from 'vue';\nimport { generateUrl } from '@nextcloud/router';\nimport { showError, showInfo } from '@nextcloud/dialogs';\nimport '@nextcloud/dialogs/dist/index.css';\nconst state = {\n  apps: [],\n  categories: [],\n  updateCount: 0,\n  loading: {},\n  loadingList: false,\n  gettingCategoriesPromise: null\n};\nconst mutations = {\n  APPS_API_FAILURE(state, error) {\n    showError(t('settings', 'An error occurred during the request. Unable to proceed.') + '<br>' + error.error.response.data.data.message, {\n      isHTML: true\n    });\n    console.error(state, error);\n  },\n  initCategories(state, _ref) {\n    let {\n      categories,\n      updateCount\n    } = _ref;\n    state.categories = categories;\n    state.updateCount = updateCount;\n  },\n  updateCategories(state, categoriesPromise) {\n    state.gettingCategoriesPromise = categoriesPromise;\n  },\n  setUpdateCount(state, updateCount) {\n    state.updateCount = updateCount;\n  },\n  addCategory(state, category) {\n    state.categories.push(category);\n  },\n  appendCategories(state, categoriesArray) {\n    // convert obj to array\n    state.categories = categoriesArray;\n  },\n  setAllApps(state, apps) {\n    state.apps = apps;\n  },\n  setError(state, _ref2) {\n    let {\n      appId,\n      error\n    } = _ref2;\n    if (!Array.isArray(appId)) {\n      appId = [appId];\n    }\n    appId.forEach(_id => {\n      const app = state.apps.find(app => app.id === _id);\n      app.error = error;\n    });\n  },\n  clearError(state, _ref3) {\n    let {\n      appId,\n      error\n    } = _ref3;\n    const app = state.apps.find(app => app.id === appId);\n    app.error = null;\n  },\n  enableApp(state, _ref4) {\n    let {\n      appId,\n      groups\n    } = _ref4;\n    const app = state.apps.find(app => app.id === appId);\n    app.active = true;\n    app.groups = groups;\n  },\n  disableApp(state, appId) {\n    const app = state.apps.find(app => app.id === appId);\n    app.active = false;\n    app.groups = [];\n    if (app.removable) {\n      app.canUnInstall = true;\n    }\n  },\n  uninstallApp(state, appId) {\n    state.apps.find(app => app.id === appId).active = false;\n    state.apps.find(app => app.id === appId).groups = [];\n    state.apps.find(app => app.id === appId).needsDownload = true;\n    state.apps.find(app => app.id === appId).installed = false;\n    state.apps.find(app => app.id === appId).canUnInstall = false;\n    state.apps.find(app => app.id === appId).canInstall = true;\n  },\n  updateApp(state, appId) {\n    const app = state.apps.find(app => app.id === appId);\n    const version = app.update;\n    app.update = null;\n    app.version = version;\n    state.updateCount--;\n  },\n  resetApps(state) {\n    state.apps = [];\n  },\n  reset(state) {\n    state.apps = [];\n    state.categories = [];\n    state.updateCount = 0;\n  },\n  startLoading(state, id) {\n    if (Array.isArray(id)) {\n      id.forEach(_id => {\n        Vue.set(state.loading, _id, true);\n      });\n    } else {\n      Vue.set(state.loading, id, true);\n    }\n  },\n  stopLoading(state, id) {\n    if (Array.isArray(id)) {\n      id.forEach(_id => {\n        Vue.set(state.loading, _id, false);\n      });\n    } else {\n      Vue.set(state.loading, id, false);\n    }\n  }\n};\nconst getters = {\n  loading(state) {\n    return function (id) {\n      return state.loading[id];\n    };\n  },\n  getCategories(state) {\n    return state.categories;\n  },\n  getAllApps(state) {\n    return state.apps;\n  },\n  getUpdateCount(state) {\n    return state.updateCount;\n  },\n  getCategoryById: state => selectedCategoryId => {\n    return state.categories.find(category => category.id === selectedCategoryId);\n  }\n};\nconst actions = {\n  enableApp(context, _ref5) {\n    let {\n      appId,\n      groups\n    } = _ref5;\n    let apps;\n    if (Array.isArray(appId)) {\n      apps = appId;\n    } else {\n      apps = [appId];\n    }\n    return api.requireAdmin().then(response => {\n      context.commit('startLoading', apps);\n      context.commit('startLoading', 'install');\n      return api.post(generateUrl('settings/apps/enable'), {\n        appIds: apps,\n        groups\n      }).then(response => {\n        context.commit('stopLoading', apps);\n        context.commit('stopLoading', 'install');\n        apps.forEach(_appId => {\n          context.commit('enableApp', {\n            appId: _appId,\n            groups\n          });\n        });\n\n        // check for server health\n        return api.get(generateUrl('apps/files')).then(() => {\n          if (response.data.update_required) {\n            showInfo(t('settings', 'The app has been enabled but needs to be updated. You will be redirected to the update page in 5 seconds.'), {\n              onClick: () => window.location.reload(),\n              close: false\n            });\n            setTimeout(function () {\n              location.reload();\n            }, 5000);\n          }\n        }).catch(() => {\n          if (!Array.isArray(appId)) {\n            context.commit('setError', {\n              appId: apps,\n              error: t('settings', 'Error: This app cannot be enabled because it makes the server unstable')\n            });\n          }\n        });\n      }).catch(error => {\n        context.commit('stopLoading', apps);\n        context.commit('stopLoading', 'install');\n        context.commit('setError', {\n          appId: apps,\n          error: error.response.data.data.message\n        });\n        context.commit('APPS_API_FAILURE', {\n          appId,\n          error\n        });\n      });\n    }).catch(error => context.commit('API_FAILURE', {\n      appId,\n      error\n    }));\n  },\n  forceEnableApp(context, _ref6) {\n    let {\n      appId,\n      groups\n    } = _ref6;\n    let apps;\n    if (Array.isArray(appId)) {\n      apps = appId;\n    } else {\n      apps = [appId];\n    }\n    return api.requireAdmin().then(() => {\n      context.commit('startLoading', apps);\n      context.commit('startLoading', 'install');\n      return api.post(generateUrl('settings/apps/force'), {\n        appId\n      }).then(response => {\n        // TODO: find a cleaner solution\n        location.reload();\n      }).catch(error => {\n        context.commit('stopLoading', apps);\n        context.commit('stopLoading', 'install');\n        context.commit('setError', {\n          appId: apps,\n          error: error.response.data.data.message\n        });\n        context.commit('APPS_API_FAILURE', {\n          appId,\n          error\n        });\n      });\n    }).catch(error => context.commit('API_FAILURE', {\n      appId,\n      error\n    }));\n  },\n  disableApp(context, _ref7) {\n    let {\n      appId\n    } = _ref7;\n    let apps;\n    if (Array.isArray(appId)) {\n      apps = appId;\n    } else {\n      apps = [appId];\n    }\n    return api.requireAdmin().then(response => {\n      context.commit('startLoading', apps);\n      return api.post(generateUrl('settings/apps/disable'), {\n        appIds: apps\n      }).then(response => {\n        context.commit('stopLoading', apps);\n        apps.forEach(_appId => {\n          context.commit('disableApp', _appId);\n        });\n        return true;\n      }).catch(error => {\n        context.commit('stopLoading', apps);\n        context.commit('APPS_API_FAILURE', {\n          appId,\n          error\n        });\n      });\n    }).catch(error => context.commit('API_FAILURE', {\n      appId,\n      error\n    }));\n  },\n  uninstallApp(context, _ref8) {\n    let {\n      appId\n    } = _ref8;\n    return api.requireAdmin().then(response => {\n      context.commit('startLoading', appId);\n      return api.get(generateUrl(\"settings/apps/uninstall/\".concat(appId))).then(response => {\n        context.commit('stopLoading', appId);\n        context.commit('uninstallApp', appId);\n        return true;\n      }).catch(error => {\n        context.commit('stopLoading', appId);\n        context.commit('APPS_API_FAILURE', {\n          appId,\n          error\n        });\n      });\n    }).catch(error => context.commit('API_FAILURE', {\n      appId,\n      error\n    }));\n  },\n  updateApp(context, _ref9) {\n    let {\n      appId\n    } = _ref9;\n    return api.requireAdmin().then(response => {\n      context.commit('startLoading', appId);\n      context.commit('startLoading', 'install');\n      return api.get(generateUrl(\"settings/apps/update/\".concat(appId))).then(response => {\n        context.commit('stopLoading', 'install');\n        context.commit('stopLoading', appId);\n        context.commit('updateApp', appId);\n        return true;\n      }).catch(error => {\n        context.commit('stopLoading', appId);\n        context.commit('stopLoading', 'install');\n        context.commit('APPS_API_FAILURE', {\n          appId,\n          error\n        });\n      });\n    }).catch(error => context.commit('API_FAILURE', {\n      appId,\n      error\n    }));\n  },\n  getAllApps(context) {\n    context.commit('startLoading', 'list');\n    return api.get(generateUrl('settings/apps/list')).then(response => {\n      context.commit('setAllApps', response.data.apps);\n      context.commit('stopLoading', 'list');\n      return true;\n    }).catch(error => context.commit('API_FAILURE', error));\n  },\n  async getCategories(context) {\n    let {\n      shouldRefetchCategories = false\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (shouldRefetchCategories || !context.state.gettingCategoriesPromise) {\n      context.commit('startLoading', 'categories');\n      try {\n        const categoriesPromise = api.get(generateUrl('settings/apps/categories'));\n        context.commit('updateCategories', categoriesPromise);\n        const categoriesPromiseResponse = await categoriesPromise;\n        if (categoriesPromiseResponse.data.length > 0) {\n          context.commit('appendCategories', categoriesPromiseResponse.data);\n          context.commit('stopLoading', 'categories');\n          return true;\n        }\n        context.commit('stopLoading', 'categories');\n        return false;\n      } catch (error) {\n        context.commit('API_FAILURE', error);\n      }\n    }\n    return context.state.gettingCategoriesPromise;\n  }\n};\nexport default {\n  state,\n  mutations,\n  getters,\n  actions\n};","/**\n * @copyright Copyright (c) 2018 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author Julius Härtl <jus@bitgrid.net>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport Vue from 'vue';\nimport Vuex, { Store } from 'vuex';\nimport users from './users.js';\nimport apps from './apps.js';\nimport settings from './settings.js';\nimport oc from './oc.js';\nimport { showError } from '@nextcloud/dialogs';\nVue.use(Vuex);\nconst debug = process.env.NODE_ENV !== 'production';\nconst mutations = {\n  API_FAILURE(state, error) {\n    try {\n      const message = error.error.response.data.ocs.meta.message;\n      showError(t('settings', 'An error occurred during the request. Unable to proceed.') + '<br>' + message, {\n        isHTML: true\n      });\n    } catch (e) {\n      showError(t('settings', 'An error occurred during the request. Unable to proceed.'));\n    }\n    console.error(state, error);\n  }\n};\nexport default new Store({\n  modules: {\n    users,\n    apps,\n    settings,\n    oc\n  },\n  strict: debug,\n  mutations\n});","/**\n * @copyright Copyright (c) 2018 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author Roeland Jago Douma <roeland@famdouma.nl>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport api from './api.js';\nimport { generateOcsUrl } from '@nextcloud/router';\nconst state = {};\nconst mutations = {};\nconst getters = {};\nconst actions = {\n  /**\n   * Set application config in database\n   *\n   * @param {object} context store context\n   * @param {object} options destructuring object\n   * @param {string} options.app Application name\n   * @param {boolean} options.key Config key\n   * @param {boolean} options.value Value to set\n   * @return {Promise}\n   */\n  setAppConfig(context, _ref) {\n    let {\n      app,\n      key,\n      value\n    } = _ref;\n    return api.requireAdmin().then(response => {\n      return api.post(generateOcsUrl('apps/provisioning_api/api/v1/config/apps/{app}/{key}', {\n        app,\n        key\n      }), {\n        value\n      }).catch(error => {\n        throw error;\n      });\n    }).catch(error => context.commit('API_FAILURE', {\n      app,\n      key,\n      value,\n      error\n    }));\n  }\n};\nexport default {\n  state,\n  mutations,\n  getters,\n  actions\n};","/**\n * @copyright Copyright (c) 2018 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nconst state = {\n  serverData: {}\n};\nconst mutations = {\n  setServerData(state, data) {\n    state.serverData = data;\n  }\n};\nconst getters = {\n  getServerData(state) {\n    return state.serverData;\n  }\n};\nconst actions = {};\nexport default {\n  state,\n  mutations,\n  getters,\n  actions\n};","/**\n * @copyright Copyright (c) 2018 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author Arthur Schiwon <blizzz@arthur-schiwon.de>\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\n * @author Daniel Calviño Sánchez <danxuliu@gmail.com>\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author Julius Härtl <jus@bitgrid.net>\n * @author Roeland Jago Douma <roeland@famdouma.nl>\n * @author Vincent Petry <vincent@nextcloud.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport api from './api.js';\nimport axios from '@nextcloud/axios';\nimport { generateOcsUrl } from '@nextcloud/router';\nimport logger from '../logger.js';\nconst orderGroups = function (groups, orderBy) {\n  /* const SORT_USERCOUNT = 1;\n   * const SORT_GROUPNAME = 2;\n   * https://github.com/nextcloud/server/blob/208e38e84e1a07a49699aa90dc5b7272d24489f0/lib/private/Group/MetaData.php#L34\n   */\n  if (orderBy === 1) {\n    return groups.sort((a, b) => a.usercount - a.disabled < b.usercount - b.disabled);\n  } else {\n    return groups.sort((a, b) => a.name.localeCompare(b.name));\n  }\n};\nconst defaults = {\n  group: {\n    id: '',\n    name: '',\n    usercount: 0,\n    disabled: 0,\n    canAdd: true,\n    canRemove: true\n  }\n};\nconst state = {\n  users: [],\n  groups: [],\n  orderBy: 1,\n  minPasswordLength: 0,\n  usersOffset: 0,\n  usersLimit: 25,\n  userCount: 0\n};\nconst mutations = {\n  appendUsers(state, usersObj) {\n    // convert obj to array\n    const users = state.users.concat(Object.keys(usersObj).map(userid => usersObj[userid]));\n    state.usersOffset += state.usersLimit;\n    state.users = users;\n  },\n  setPasswordPolicyMinLength(state, length) {\n    state.minPasswordLength = length !== '' ? length : 0;\n  },\n  initGroups(state, _ref) {\n    let {\n      groups,\n      orderBy,\n      userCount\n    } = _ref;\n    state.groups = groups.map(group => Object.assign({}, defaults.group, group));\n    state.orderBy = orderBy;\n    state.userCount = userCount;\n    state.groups = orderGroups(state.groups, state.orderBy);\n  },\n  addGroup(state, _ref2) {\n    let {\n      gid,\n      displayName\n    } = _ref2;\n    try {\n      if (typeof state.groups.find(group => group.id === gid) !== 'undefined') {\n        return;\n      }\n      // extend group to default values\n      const group = Object.assign({}, defaults.group, {\n        id: gid,\n        name: displayName\n      });\n      state.groups.push(group);\n      state.groups = orderGroups(state.groups, state.orderBy);\n    } catch (e) {\n      console.error('Can\\'t create group', e);\n    }\n  },\n  renameGroup(state, _ref3) {\n    let {\n      gid,\n      displayName\n    } = _ref3;\n    const groupIndex = state.groups.findIndex(groupSearch => groupSearch.id === gid);\n    if (groupIndex >= 0) {\n      const updatedGroup = state.groups[groupIndex];\n      updatedGroup.name = displayName;\n      state.groups.splice(groupIndex, 1, updatedGroup);\n      state.groups = orderGroups(state.groups, state.orderBy);\n    }\n  },\n  removeGroup(state, gid) {\n    const groupIndex = state.groups.findIndex(groupSearch => groupSearch.id === gid);\n    if (groupIndex >= 0) {\n      state.groups.splice(groupIndex, 1);\n    }\n  },\n  addUserGroup(state, _ref4) {\n    let {\n      userid,\n      gid\n    } = _ref4;\n    const group = state.groups.find(groupSearch => groupSearch.id === gid);\n    const user = state.users.find(user => user.id === userid);\n    // increase count if user is enabled\n    if (group && user.enabled && state.userCount > 0) {\n      group.usercount++;\n    }\n    const groups = user.groups;\n    groups.push(gid);\n    state.groups = orderGroups(state.groups, state.orderBy);\n  },\n  removeUserGroup(state, _ref5) {\n    let {\n      userid,\n      gid\n    } = _ref5;\n    const group = state.groups.find(groupSearch => groupSearch.id === gid);\n    const user = state.users.find(user => user.id === userid);\n    // lower count if user is enabled\n    if (group && user.enabled && state.userCount > 0) {\n      group.usercount--;\n    }\n    const groups = user.groups;\n    groups.splice(groups.indexOf(gid), 1);\n    state.groups = orderGroups(state.groups, state.orderBy);\n  },\n  addUserSubAdmin(state, _ref6) {\n    let {\n      userid,\n      gid\n    } = _ref6;\n    const groups = state.users.find(user => user.id === userid).subadmin;\n    groups.push(gid);\n  },\n  removeUserSubAdmin(state, _ref7) {\n    let {\n      userid,\n      gid\n    } = _ref7;\n    const groups = state.users.find(user => user.id === userid).subadmin;\n    groups.splice(groups.indexOf(gid), 1);\n  },\n  deleteUser(state, userid) {\n    const userIndex = state.users.findIndex(user => user.id === userid);\n    this.commit('updateUserCounts', {\n      user: state.users[userIndex],\n      actionType: 'remove'\n    });\n    state.users.splice(userIndex, 1);\n  },\n  addUserData(state, response) {\n    const user = response.data.ocs.data;\n    state.users.push(user);\n    this.commit('updateUserCounts', {\n      user,\n      actionType: 'create'\n    });\n  },\n  enableDisableUser(state, _ref8) {\n    let {\n      userid,\n      enabled\n    } = _ref8;\n    const user = state.users.find(user => user.id === userid);\n    user.enabled = enabled;\n    this.commit('updateUserCounts', {\n      user,\n      actionType: enabled ? 'enable' : 'disable'\n    });\n  },\n  // update active/disabled counts, groups counts\n  updateUserCounts(state, _ref9) {\n    let {\n      user,\n      actionType\n    } = _ref9;\n    const disabledGroup = state.groups.find(group => group.id === 'disabled');\n    switch (actionType) {\n      case 'enable':\n      case 'disable':\n        disabledGroup.usercount += user.enabled ? -1 : 1; // update Disabled Users count\n        state.userCount += user.enabled ? 1 : -1; // update Active Users count\n        user.groups.forEach(userGroup => {\n          const group = state.groups.find(groupSearch => groupSearch.id === userGroup);\n          group.disabled += user.enabled ? -1 : 1; // update group disabled count\n        });\n\n        break;\n      case 'create':\n        state.userCount++; // increment Active Users count\n\n        user.groups.forEach(userGroup => {\n          state.groups.find(groupSearch => groupSearch.id === userGroup).usercount++; // increment group total count\n        });\n\n        break;\n      case 'remove':\n        if (user.enabled) {\n          state.userCount--; // decrement Active Users count\n          user.groups.forEach(userGroup => {\n            const group = state.groups.find(groupSearch => groupSearch.id === userGroup);\n            if (!group) {\n              console.warn('User group ' + userGroup + ' does not exist during user removal');\n              return;\n            }\n            group.usercount--; // decrement group total count\n          });\n        } else {\n          disabledGroup.usercount--; // decrement Disabled Users count\n          user.groups.forEach(userGroup => {\n            const group = state.groups.find(groupSearch => groupSearch.id === userGroup);\n            group.disabled--; // decrement group disabled count\n          });\n        }\n\n        break;\n      default:\n        logger.error(\"Unknown action type in updateUserCounts: '\".concat(actionType, \"'\"));\n      // not throwing error to interrupt execution as this is not fatal\n    }\n  },\n\n  setUserData(state, _ref10) {\n    let {\n      userid,\n      key,\n      value\n    } = _ref10;\n    if (key === 'quota') {\n      const humanValue = OC.Util.computerFileSize(value);\n      state.users.find(user => user.id === userid)[key][key] = humanValue !== null ? humanValue : value;\n    } else {\n      state.users.find(user => user.id === userid)[key] = value;\n    }\n  },\n  /**\n   * Reset users list\n   *\n   * @param {object} state the store state\n   */\n  resetUsers(state) {\n    state.users = [];\n    state.usersOffset = 0;\n  }\n};\nconst getters = {\n  getUsers(state) {\n    return state.users;\n  },\n  getGroups(state) {\n    return state.groups;\n  },\n  getSubadminGroups(state) {\n    // Can't be subadmin of admin or disabled\n    return state.groups.filter(group => group.id !== 'admin' && group.id !== 'disabled');\n  },\n  getPasswordPolicyMinLength(state) {\n    return state.minPasswordLength;\n  },\n  getUsersOffset(state) {\n    return state.usersOffset;\n  },\n  getUsersLimit(state) {\n    return state.usersLimit;\n  },\n  getUserCount(state) {\n    return state.userCount;\n  }\n};\nconst CancelToken = axios.CancelToken;\nlet searchRequestCancelSource = null;\nconst actions = {\n  /**\n   * search users\n   *\n   * @param {object} context store context\n   * @param {object} options destructuring object\n   * @param {number} options.offset List offset to request\n   * @param {number} options.limit List number to return from offset\n   * @param {string} options.search Search amongst users\n   * @return {Promise}\n   */\n  searchUsers(context, _ref11) {\n    let {\n      offset,\n      limit,\n      search\n    } = _ref11;\n    search = typeof search === 'string' ? search : '';\n    return api.get(generateOcsUrl('cloud/users/details?offset={offset}&limit={limit}&search={search}', {\n      offset,\n      limit,\n      search\n    })).catch(error => {\n      if (!axios.isCancel(error)) {\n        context.commit('API_FAILURE', error);\n      }\n    });\n  },\n  /**\n   * Get user details\n   *\n   * @param {object} context store context\n   * @param {string} userId user id\n   * @return {Promise}\n   */\n  getUser(context, userId) {\n    return api.get(generateOcsUrl(\"cloud/users/\".concat(userId))).catch(error => {\n      if (!axios.isCancel(error)) {\n        context.commit('API_FAILURE', error);\n      }\n    });\n  },\n  /**\n   * Get all users with full details\n   *\n   * @param {object} context store context\n   * @param {object} options destructuring object\n   * @param {number} options.offset List offset to request\n   * @param {number} options.limit List number to return from offset\n   * @param {string} options.search Search amongst users\n   * @param {string} options.group Get users from group\n   * @return {Promise}\n   */\n  getUsers(context, _ref12) {\n    let {\n      offset,\n      limit,\n      search,\n      group\n    } = _ref12;\n    if (searchRequestCancelSource) {\n      searchRequestCancelSource.cancel('Operation canceled by another search request.');\n    }\n    searchRequestCancelSource = CancelToken.source();\n    search = typeof search === 'string' ? search : '';\n    group = typeof group === 'string' ? group : '';\n    if (group !== '') {\n      return api.get(generateOcsUrl('cloud/groups/{group}/users/details?offset={offset}&limit={limit}&search={search}', {\n        group: encodeURIComponent(group),\n        offset,\n        limit,\n        search\n      }), {\n        cancelToken: searchRequestCancelSource.token\n      }).then(response => {\n        const usersCount = Object.keys(response.data.ocs.data.users).length;\n        if (usersCount > 0) {\n          context.commit('appendUsers', response.data.ocs.data.users);\n        }\n        return usersCount;\n      }).catch(error => {\n        if (!axios.isCancel(error)) {\n          context.commit('API_FAILURE', error);\n        }\n      });\n    }\n    return api.get(generateOcsUrl('cloud/users/details?offset={offset}&limit={limit}&search={search}', {\n      offset,\n      limit,\n      search\n    }), {\n      cancelToken: searchRequestCancelSource.token\n    }).then(response => {\n      const usersCount = Object.keys(response.data.ocs.data.users).length;\n      if (usersCount > 0) {\n        context.commit('appendUsers', response.data.ocs.data.users);\n      }\n      return usersCount;\n    }).catch(error => {\n      if (!axios.isCancel(error)) {\n        context.commit('API_FAILURE', error);\n      }\n    });\n  },\n  getGroups(context, _ref13) {\n    let {\n      offset,\n      limit,\n      search\n    } = _ref13;\n    search = typeof search === 'string' ? search : '';\n    const limitParam = limit === -1 ? '' : \"&limit=\".concat(limit);\n    return api.get(generateOcsUrl('cloud/groups?offset={offset}&search={search}', {\n      offset,\n      search\n    }) + limitParam).then(response => {\n      if (Object.keys(response.data.ocs.data.groups).length > 0) {\n        response.data.ocs.data.groups.forEach(function (group) {\n          context.commit('addGroup', {\n            gid: group,\n            displayName: group\n          });\n        });\n        return true;\n      }\n      return false;\n    }).catch(error => context.commit('API_FAILURE', error));\n  },\n  /**\n   * Get all users with full details\n   *\n   * @param {object} context store context\n   * @param {object} options destructuring object\n   * @param {number} options.offset List offset to request\n   * @param {number} options.limit List number to return from offset\n   * @param {string} options.search -\n   * @return {Promise}\n   */\n  getUsersFromList(context, _ref14) {\n    let {\n      offset,\n      limit,\n      search\n    } = _ref14;\n    search = typeof search === 'string' ? search : '';\n    return api.get(generateOcsUrl('cloud/users/details?offset={offset}&limit={limit}&search={search}', {\n      offset,\n      limit,\n      search\n    })).then(response => {\n      if (Object.keys(response.data.ocs.data.users).length > 0) {\n        context.commit('appendUsers', response.data.ocs.data.users);\n        return true;\n      }\n      return false;\n    }).catch(error => context.commit('API_FAILURE', error));\n  },\n  /**\n   * Get all users with full details from a groupid\n   *\n   * @param {object} context store context\n   * @param {object} options destructuring object\n   * @param {number} options.offset List offset to request\n   * @param {number} options.limit List number to return from offset\n   * @param {string} options.groupid -\n   * @return {Promise}\n   */\n  getUsersFromGroup(context, _ref15) {\n    let {\n      groupid,\n      offset,\n      limit\n    } = _ref15;\n    return api.get(generateOcsUrl('cloud/users/{groupId}/details?offset={offset}&limit={limit}', {\n      groupId: encodeURIComponent(groupid),\n      offset,\n      limit\n    })).then(response => context.commit('getUsersFromList', response.data.ocs.data.users)).catch(error => context.commit('API_FAILURE', error));\n  },\n  getPasswordPolicyMinLength(context) {\n    if (OC.getCapabilities().password_policy && OC.getCapabilities().password_policy.minLength) {\n      context.commit('setPasswordPolicyMinLength', OC.getCapabilities().password_policy.minLength);\n      return OC.getCapabilities().password_policy.minLength;\n    }\n    return false;\n  },\n  /**\n   * Add group\n   *\n   * @param {object} context store context\n   * @param {string} gid Group id\n   * @return {Promise}\n   */\n  addGroup(context, gid) {\n    return api.requireAdmin().then(response => {\n      return api.post(generateOcsUrl('cloud/groups'), {\n        groupid: gid\n      }).then(response => {\n        context.commit('addGroup', {\n          gid,\n          displayName: gid\n        });\n        return {\n          gid,\n          displayName: gid\n        };\n      }).catch(error => {\n        throw error;\n      });\n    }).catch(error => {\n      context.commit('API_FAILURE', {\n        gid,\n        error\n      });\n      // let's throw one more time to prevent the view\n      // from adding the user to a group that doesn't exists\n      throw error;\n    });\n  },\n  /**\n   * Rename group\n   *\n   * @param {object} context store context\n   * @param {string} groupid Group id\n   * @param {string} displayName Group display name\n   * @return {Promise}\n   */\n  renameGroup(context, _ref16) {\n    let {\n      groupid,\n      displayName\n    } = _ref16;\n    return api.requireAdmin().then(response => {\n      return api.put(generateOcsUrl('cloud/groups/{groupId}', {\n        groupId: encodeURIComponent(groupid)\n      }), {\n        key: 'displayname',\n        value: displayName\n      }).then(response => {\n        context.commit('renameGroup', {\n          gid: groupid,\n          displayName\n        });\n        return {\n          groupid,\n          displayName\n        };\n      }).catch(error => {\n        throw error;\n      });\n    }).catch(error => {\n      context.commit('API_FAILURE', {\n        groupid,\n        error\n      });\n      // let's throw one more time to prevent the view\n      // from renaming the group\n      throw error;\n    });\n  },\n  /**\n   * Remove group\n   *\n   * @param {object} context store context\n   * @param {string} gid Group id\n   * @return {Promise}\n   */\n  removeGroup(context, gid) {\n    return api.requireAdmin().then(response => {\n      return api.delete(generateOcsUrl('cloud/groups/{groupId}', {\n        groupId: encodeURIComponent(gid)\n      })).then(response => context.commit('removeGroup', gid)).catch(error => {\n        throw error;\n      });\n    }).catch(error => context.commit('API_FAILURE', {\n      gid,\n      error\n    }));\n  },\n  /**\n   * Add user to group\n   *\n   * @param {object} context store context\n   * @param {object} options destructuring object\n   * @param {string} options.userid User id\n   * @param {string} options.gid Group id\n   * @return {Promise}\n   */\n  addUserGroup(context, _ref17) {\n    let {\n      userid,\n      gid\n    } = _ref17;\n    return api.requireAdmin().then(response => {\n      return api.post(generateOcsUrl('cloud/users/{userid}/groups', {\n        userid\n      }), {\n        groupid: gid\n      }).then(response => context.commit('addUserGroup', {\n        userid,\n        gid\n      })).catch(error => {\n        throw error;\n      });\n    }).catch(error => context.commit('API_FAILURE', {\n      userid,\n      error\n    }));\n  },\n  /**\n   * Remove user from group\n   *\n   * @param {object} context store context\n   * @param {object} options destructuring object\n   * @param {string} options.userid User id\n   * @param {string} options.gid Group id\n   * @return {Promise}\n   */\n  removeUserGroup(context, _ref18) {\n    let {\n      userid,\n      gid\n    } = _ref18;\n    return api.requireAdmin().then(response => {\n      return api.delete(generateOcsUrl('cloud/users/{userid}/groups', {\n        userid\n      }), {\n        groupid: gid\n      }).then(response => context.commit('removeUserGroup', {\n        userid,\n        gid\n      })).catch(error => {\n        throw error;\n      });\n    }).catch(error => {\n      context.commit('API_FAILURE', {\n        userid,\n        error\n      });\n      // let's throw one more time to prevent\n      // the view from removing the user row on failure\n      throw error;\n    });\n  },\n  /**\n   * Add user to group admin\n   *\n   * @param {object} context store context\n   * @param {object} options destructuring object\n   * @param {string} options.userid User id\n   * @param {string} options.gid Group id\n   * @return {Promise}\n   */\n  addUserSubAdmin(context, _ref19) {\n    let {\n      userid,\n      gid\n    } = _ref19;\n    return api.requireAdmin().then(response => {\n      return api.post(generateOcsUrl('cloud/users/{userid}/subadmins', {\n        userid\n      }), {\n        groupid: gid\n      }).then(response => context.commit('addUserSubAdmin', {\n        userid,\n        gid\n      })).catch(error => {\n        throw error;\n      });\n    }).catch(error => context.commit('API_FAILURE', {\n      userid,\n      error\n    }));\n  },\n  /**\n   * Remove user from group admin\n   *\n   * @param {object} context store context\n   * @param {object} options destructuring object\n   * @param {string} options.userid User id\n   * @param {string} options.gid Group id\n   * @return {Promise}\n   */\n  removeUserSubAdmin(context, _ref20) {\n    let {\n      userid,\n      gid\n    } = _ref20;\n    return api.requireAdmin().then(response => {\n      return api.delete(generateOcsUrl('cloud/users/{userid}/subadmins', {\n        userid\n      }), {\n        groupid: gid\n      }).then(response => context.commit('removeUserSubAdmin', {\n        userid,\n        gid\n      })).catch(error => {\n        throw error;\n      });\n    }).catch(error => context.commit('API_FAILURE', {\n      userid,\n      error\n    }));\n  },\n  /**\n   * Mark all user devices for remote wipe\n   *\n   * @param {object} context store context\n   * @param {string} userid User id\n   * @return {Promise}\n   */\n  wipeUserDevices(context, userid) {\n    return api.requireAdmin().then(response => {\n      return api.post(generateOcsUrl('cloud/users/{userid}/wipe', {\n        userid\n      })).catch(error => {\n        throw error;\n      });\n    }).catch(error => context.commit('API_FAILURE', {\n      userid,\n      error\n    }));\n  },\n  /**\n   * Delete a user\n   *\n   * @param {object} context store context\n   * @param {string} userid User id\n   * @return {Promise}\n   */\n  deleteUser(context, userid) {\n    return api.requireAdmin().then(response => {\n      return api.delete(generateOcsUrl('cloud/users/{userid}', {\n        userid\n      })).then(response => context.commit('deleteUser', userid)).catch(error => {\n        throw error;\n      });\n    }).catch(error => context.commit('API_FAILURE', {\n      userid,\n      error\n    }));\n  },\n  /**\n   * Add a user\n   *\n   * @param {object} context store context\n   * @param {Function} context.commit -\n   * @param {Function} context.dispatch -\n   * @param {object} options destructuring object\n   * @param {string} options.userid User id\n   * @param {string} options.password User password\n   * @param {string} options.displayName User display name\n   * @param {string} options.email User email\n   * @param {string} options.groups User groups\n   * @param {string} options.subadmin User subadmin groups\n   * @param {string} options.quota User email\n   * @param {string} options.language User language\n   * @param {string} options.manager User manager\n   * @return {Promise}\n   */\n  addUser(_ref21, _ref22) {\n    let {\n      commit,\n      dispatch\n    } = _ref21;\n    let {\n      userid,\n      password,\n      displayName,\n      email,\n      groups,\n      subadmin,\n      quota,\n      language,\n      manager\n    } = _ref22;\n    return api.requireAdmin().then(response => {\n      return api.post(generateOcsUrl('cloud/users'), {\n        userid,\n        password,\n        displayName,\n        email,\n        groups,\n        subadmin,\n        quota,\n        language,\n        manager\n      }).then(response => dispatch('addUserData', userid || response.data.ocs.data.id)).catch(error => {\n        throw error;\n      });\n    }).catch(error => {\n      commit('API_FAILURE', {\n        userid,\n        error\n      });\n      throw error;\n    });\n  },\n  /**\n   * Get user data and commit addition\n   *\n   * @param {object} context store context\n   * @param {string} userid User id\n   * @return {Promise}\n   */\n  addUserData(context, userid) {\n    return api.requireAdmin().then(response => {\n      return api.get(generateOcsUrl('cloud/users/{userid}', {\n        userid\n      })).then(response => context.commit('addUserData', response)).catch(error => {\n        throw error;\n      });\n    }).catch(error => context.commit('API_FAILURE', {\n      userid,\n      error\n    }));\n  },\n  /**\n   * Enable or disable user\n   *\n   * @param {object} context store context\n   * @param {object} options destructuring object\n   * @param {string} options.userid User id\n   * @param {boolean} options.enabled User enablement status\n   * @return {Promise}\n   */\n  enableDisableUser(context, _ref23) {\n    let {\n      userid,\n      enabled = true\n    } = _ref23;\n    const userStatus = enabled ? 'enable' : 'disable';\n    return api.requireAdmin().then(response => {\n      return api.put(generateOcsUrl('cloud/users/{userid}/{userStatus}', {\n        userid,\n        userStatus\n      })).then(response => context.commit('enableDisableUser', {\n        userid,\n        enabled\n      })).catch(error => {\n        throw error;\n      });\n    }).catch(error => context.commit('API_FAILURE', {\n      userid,\n      error\n    }));\n  },\n  /**\n   * Edit user data\n   *\n   * @param {object} context store context\n   * @param {object} options destructuring object\n   * @param {string} options.userid User id\n   * @param {string} options.key User field to edit\n   * @param {string} options.value Value of the change\n   * @return {Promise}\n   */\n  setUserData(context, _ref24) {\n    let {\n      userid,\n      key,\n      value\n    } = _ref24;\n    const allowedEmpty = ['email', 'displayname', 'manager'];\n    if (['email', 'language', 'quota', 'displayname', 'password', 'manager'].indexOf(key) !== -1) {\n      // We allow empty email or displayname\n      if (typeof value === 'string' && (allowedEmpty.indexOf(key) === -1 && value.length > 0 || allowedEmpty.indexOf(key) !== -1)) {\n        return api.requireAdmin().then(response => {\n          return api.put(generateOcsUrl('cloud/users/{userid}', {\n            userid\n          }), {\n            key,\n            value\n          }).then(response => context.commit('setUserData', {\n            userid,\n            key,\n            value\n          })).catch(error => {\n            throw error;\n          });\n        }).catch(error => context.commit('API_FAILURE', {\n          userid,\n          error\n        }));\n      }\n    }\n    return Promise.reject(new Error('Invalid request data'));\n  },\n  /**\n   * Send welcome mail\n   *\n   * @param {object} context store context\n   * @param {string} userid User id\n   * @return {Promise}\n   */\n  sendWelcomeMail(context, userid) {\n    return api.requireAdmin().then(response => {\n      return api.post(generateOcsUrl('cloud/users/{userid}/welcome', {\n        userid\n      })).then(response => true).catch(error => {\n        throw error;\n      });\n    }).catch(error => context.commit('API_FAILURE', {\n      userid,\n      error\n    }));\n  }\n};\nexport default {\n  state,\n  mutations,\n  getters,\n  actions\n};","/**\n * @copyright Copyright (c) 2022 Joas Schilling <coding@schilljs.com>\n *\n * @author Joas Schilling <coding@schilljs.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { loadState } from '@nextcloud/initial-state';\n\n/**\n * Set the page heading\n *\n * @param {string} heading page title from the history api\n * @since 27.0.0\n */\nexport function setPageHeading(heading) {\n  const headingEl = document.getElementById('page-heading-level-1');\n  if (headingEl) {\n    headingEl.textContent = heading;\n  }\n}\nexport default {\n  /**\n   * @return {boolean} Whether the user opted-out of shortcuts so that they should not be registered\n   */\n  disableKeyboardShortcuts() {\n    return loadState('theming', 'shortcutsDisabled', false);\n  },\n  setPageHeading\n};","export default {\n  name: 'App',\n  beforeMount() {\n    // importing server data into the store\n    const serverDataElmt = document.getElementById('serverData');\n    if (serverDataElmt !== null) {\n      this.$store.commit('setServerData', JSON.parse(document.getElementById('serverData').dataset.server));\n    }\n  }\n};","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c;\n  return _c(\"router-view\");\n};\nvar staticRenderFns = [];\nrender._withStripped = true;\nexport { render, staticRenderFns };","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=f468116e&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/code/server-27.1.0/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('f468116e')) {\n      api.createRecord('f468116e', component.options)\n    } else {\n      api.reload('f468116e', component.options)\n    }\n    module.hot.accept(\"./App.vue?vue&type=template&id=f468116e&\", function () {\n      api.rerender('f468116e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/settings/src/App.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \"-\" + chunkId + \".js?v=\" + {\"_fd9c-_0fee-_0cc0-_aeb7\":\"8ddaf1c5ac4936c83e13\",\"settings-users\":\"34afce2d3dfba0e6fc20\",\"settings-apps-view\":\"f285b394b08676a64a46\"}[chunkId] + \"\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"nextcloud:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"settings-vue-settings-apps-users-management\": 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunknextcloud\"] = self[\"webpackChunknextcloud\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"core-common\"], () => (__webpack_require__(\"./apps/settings/src/main-apps-users-management.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":[],"sourceRoot":""}